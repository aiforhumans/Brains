{
  "last_node_id": 20,
  "last_link_id": 25,
  "nodes": [
    {
      "id": 1,
      "type": "Note",
      "pos": [50, 50],
      "size": [1800, 280],
      "flags": {},
      "order": 0,
      "mode": 0,
      "properties": {},
      "widgets_values": [
        "üîÑ ITERATIVE LEARNING LOOP - Brains-XDEV\n\n‚ú® Purpose: Generate ‚Üí Analyze ‚Üí Learn ‚Üí Improve ‚Üí Repeat\n\nüìã Workflow Components:\n1. GENERATION - Create images from prompts\n2. ANALYSIS - Score quality with AI\n3. LEARNING - Train BRAIN with results\n4. ADAPTATION - Generate improved prompts\n5. ITERATION - Feed back into generation\n\nüéØ How It Works:\n‚Ä¢ Start with initial prompt\n‚Ä¢ Generate image with KSampler\n‚Ä¢ Score quality (technical, artistic, semantic)\n‚Ä¢ Learn from high-scoring results\n‚Ä¢ Suggest improved prompt based on learning\n‚Ä¢ Use suggestion for next iteration\n\n‚ö° Manual Loop Process:\n1. Set initial prompt in LoadCheckpoint notes\n2. Queue prompt (generates image)\n3. Check quality score output\n4. Review suggested improvements\n5. Copy suggestion to prompt input\n6. Queue again for next iteration\n7. Repeat until satisfied\n\nüîÆ Future Enhancement:\n‚Ä¢ Add loop counter node\n‚Ä¢ Automatic iteration control\n‚Ä¢ Convergence detection\n‚Ä¢ Best result selection\n\nüí° Tips:\n‚Ä¢ High scores (>0.7) = good learning data\n‚Ä¢ Low scores (<0.3) = avoid these patterns\n‚Ä¢ Watch suggestion output for insights\n‚Ä¢ Save successful prompts\n‚Ä¢ Track improvement over iterations"
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 2,
      "type": "CheckpointLoaderSimple",
      "pos": [100, 400],
      "size": [350, 100],
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [1]
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [2, 3]
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [4]
        }
      ],
      "properties": {},
      "widgets_values": ["sd_xl_base_1.0.safetensors"],
      "title": "üé® Load Model"
    },
    {
      "id": 3,
      "type": "CLIPTextEncode",
      "pos": [100, 550],
      "size": [400, 200],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [5]
        }
      ],
      "properties": {},
      "widgets_values": ["beautiful landscape, mountains, sunset, highly detailed, photorealistic, 8k"],
      "title": "‚úèÔ∏è Positive Prompt (EDIT THIS EACH ITERATION)"
    },
    {
      "id": 4,
      "type": "CLIPTextEncode",
      "pos": [100, 800],
      "size": [400, 100],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [6]
        }
      ],
      "properties": {},
      "widgets_values": ["blurry, low quality, distorted, watermark"],
      "title": "üö´ Negative Prompt"
    },
    {
      "id": 5,
      "type": "EmptyLatentImage",
      "pos": [100, 950],
      "size": [315, 110],
      "flags": {},
      "order": 4,
      "mode": 0,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [7]
        }
      ],
      "properties": {},
      "widgets_values": [1024, 1024, 1],
      "title": "üìê Canvas"
    },
    {
      "id": 6,
      "type": "KSampler",
      "pos": [550, 400],
      "size": [315, 262],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 5
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 6
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 7
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [8]
        }
      ],
      "properties": {},
      "widgets_values": [42, "fixed", 25, 7.5, "euler_ancestral", "normal", 1],
      "title": "‚ö° Generate"
    },
    {
      "id": 7,
      "type": "VAEDecode",
      "pos": [550, 720],
      "size": [210, 46],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 8
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 4
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [9, 10, 11]
        }
      ],
      "properties": {},
      "title": "üñºÔ∏è Decode"
    },
    {
      "id": 8,
      "type": "SaveImage",
      "pos": [550, 820],
      "size": [315, 270],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 9
        }
      ],
      "properties": {},
      "widgets_values": ["brains_iteration"],
      "title": "üíæ Save Result"
    },
    {
      "id": 9,
      "type": "BrainsXDEV_Florence2Adapter",
      "pos": [950, 400],
      "size": [350, 130],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 10
        }
      ],
      "outputs": [
        {
          "name": "caption",
          "type": "STRING",
          "links": [12, 13]
        },
        {
          "name": "metadata",
          "type": "DICT",
          "links": null
        }
      ],
      "properties": {},
      "widgets_values": [
        "microsoft/Florence-2-base",
        "<DETAILED_CAPTION>",
        128
      ],
      "title": "ü§ñ Analyze Image"
    },
    {
      "id": 10,
      "type": "BrainsXDEV_PromptBrainQualityScore",
      "pos": [950, 580],
      "size": [400, 410],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 11
        },
        {
          "name": "caption",
          "type": "STRING",
          "widget": {"name": "caption"},
          "link": 12
        }
      ],
      "outputs": [
        {
          "name": "quality_score",
          "type": "FLOAT",
          "links": [14, 15]
        },
        {
          "name": "detailed_analysis",
          "type": "STRING",
          "links": [16]
        },
        {
          "name": "quality_grade",
          "type": "STRING",
          "links": [17]
        },
        {
          "name": "technical_score",
          "type": "FLOAT",
          "links": null
        },
        {
          "name": "artistic_score",
          "type": "FLOAT",
          "links": null
        },
        {
          "name": "semantic_score",
          "type": "FLOAT",
          "links": null
        }
      ],
      "properties": {},
      "widgets_values": [
        "",
        "overall_quality",
        "detailed",
        "balanced",
        0,
        0,
        true,
        true,
        true,
        true
      ],
      "title": "üéØ Score Quality"
    },
    {
      "id": 11,
      "type": "ShowText|pysssss",
      "pos": [1400, 580],
      "size": [400, 300],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 16
        }
      ],
      "outputs": [],
      "properties": {},
      "title": "üìä Quality Analysis"
    },
    {
      "id": 12,
      "type": "ShowText|pysssss",
      "pos": [1400, 920],
      "size": [400, 100],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 17
        }
      ],
      "properties": {},
      "title": "üèÜ Grade"
    },
    {
      "id": 13,
      "type": "BrainsXDEV_PromptBrainSource",
      "pos": [100, 1150],
      "size": [280, 110],
      "flags": {},
      "order": 12,
      "mode": 0,
      "outputs": [
        {
          "name": "brain_data",
          "type": "BRAIN",
          "links": [18]
        }
      ],
      "properties": {},
      "widgets_values": ["<auto_find>", false, true],
      "title": "üß† BRAIN Source"
    },
    {
      "id": 14,
      "type": "BrainsXDEV_PromptBrainLearnDirect",
      "pos": [450, 1150],
      "size": [400, 210],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "brain_data",
          "type": "BRAIN",
          "link": 18
        },
        {
          "name": "prompt",
          "type": "STRING",
          "widget": {"name": "prompt"},
          "link": 13
        },
        {
          "name": "score",
          "type": "FLOAT",
          "widget": {"name": "score"},
          "link": 14
        }
      ],
      "outputs": [
        {
          "name": "brain_data",
          "type": "BRAIN",
          "links": [19]
        },
        {
          "name": "status",
          "type": "STRING",
          "links": [20]
        }
      ],
      "properties": {},
      "widgets_values": [
        "",
        0.5,
        "photorealistic",
        "composition",
        1.5
      ],
      "title": "üìö Learn from Result"
    },
    {
      "id": 15,
      "type": "ShowText|pysssss",
      "pos": [900, 1150],
      "size": [350, 100],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 20
        }
      ],
      "outputs": [],
      "properties": {},
      "title": "‚úÖ Learn Status"
    },
    {
      "id": 16,
      "type": "BrainsXDEV_PromptBrainSuggestDirect",
      "pos": [450, 1420],
      "size": [400, 310],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "brain_data",
          "type": "BRAIN",
          "link": 19
        },
        {
          "name": "base_prompt",
          "type": "STRING",
          "widget": {"name": "base_prompt"},
          "link": 13
        }
      ],
      "outputs": [
        {
          "name": "brain_data",
          "type": "BRAIN",
          "links": null
        },
        {
          "name": "suggestion_1",
          "type": "STRING",
          "links": [21]
        },
        {
          "name": "suggestion_2",
          "type": "STRING",
          "links": null
        },
        {
          "name": "suggestion_3",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {},
      "widgets_values": [
        "",
        3,
        1.0,
        "none",
        0.3
      ],
      "title": "üí° Suggest Improvement"
    },
    {
      "id": 17,
      "type": "ShowText|pysssss",
      "pos": [900, 1420],
      "size": [550, 250],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 21
        }
      ],
      "outputs": [],
      "properties": {},
      "title": "üîÆ Suggested Next Prompt (COPY THIS TO TOP)"
    },
    {
      "id": 18,
      "type": "ShowText|pysssss",
      "pos": [900, 1720],
      "size": [350, 200],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": null
        }
      ],
      "outputs": [],
      "properties": {},
      "title": "üîç Suggestion 2 (Optional)"
    },
    {
      "id": 19,
      "type": "Note",
      "pos": [1500, 1150],
      "size": [450, 770],
      "flags": {},
      "order": 18,
      "mode": 0,
      "properties": {},
      "widgets_values": [
        "üîÑ ITERATION GUIDE\n\nüìã Manual Loop Process:\n\n1Ô∏è‚É£ FIRST RUN:\n   ‚Ä¢ Set initial prompt in node #3\n   ‚Ä¢ Queue prompt\n   ‚Ä¢ Wait for completion\n\n2Ô∏è‚É£ REVIEW RESULTS:\n   ‚Ä¢ Check quality score (node #10)\n   ‚Ä¢ Read analysis (node #11)\n   ‚Ä¢ See grade (node #12)\n   ‚Ä¢ View generated image\n\n3Ô∏è‚É£ CHECK LEARNING:\n   ‚Ä¢ Learn status (node #15)\n   ‚Ä¢ High score = learned pattern\n   ‚Ä¢ Low score = avoid pattern\n\n4Ô∏è‚É£ GET SUGGESTION:\n   ‚Ä¢ Read suggested prompt (node #17)\n   ‚Ä¢ Review suggestion details (node #18)\n   ‚Ä¢ Understand improvements\n\n5Ô∏è‚É£ NEXT ITERATION:\n   ‚Ä¢ Copy suggested prompt\n   ‚Ä¢ Paste into node #3 (top)\n   ‚Ä¢ Queue prompt again\n   ‚Ä¢ Repeat process\n\nüéØ Stopping Criteria:\n\n‚úÖ Quality score > 0.8\n‚úÖ Grade = A or S\n‚úÖ Visually satisfied\n‚úÖ Diminishing improvements\n\nüìä Track Progress:\n\nIteration 1: Score ___\nIteration 2: Score ___\nIteration 3: Score ___\nIteration 4: Score ___\nIteration 5: Score ___\n\nüèÜ Best Result:\n‚Ä¢ Iteration #: ___\n‚Ä¢ Score: ___\n‚Ä¢ Prompt: ___________\n\nüí° Tips:\n‚Ä¢ Save good results\n‚Ä¢ Note what works\n‚Ä¢ Try different seeds\n‚Ä¢ Adjust target_score\n‚Ä¢ Experiment with styles\n\nüîÆ Future Auto-Loop:\n‚Ä¢ Add loop counter\n‚Ä¢ Auto-copy suggestions\n‚Ä¢ Stop at target score\n‚Ä¢ Save best results\n‚Ä¢ Compare iterations"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 20,
      "type": "Note",
      "pos": [1850, 400],
      "size": [400, 680],
      "flags": {},
      "order": 19,
      "mode": 0,
      "properties": {},
      "widgets_values": [
        "‚öôÔ∏è PARAMETER TUNING\n\nüé® Generation (Node #6):\n‚Ä¢ seed: Change for variety\n‚Ä¢ steps: 20-30 for quality\n‚Ä¢ cfg: 7-8 for balance\n‚Ä¢ sampler: euler_ancestral\n‚Ä¢ scheduler: normal\n\nü§ñ Florence2 (Node #9):\n‚Ä¢ <CAPTION>: Brief\n‚Ä¢ <DETAILED_CAPTION>: Rich\n‚Ä¢ <MORE_DETAILED_CAPTION>: Verbose\n‚Ä¢ max_tokens: 64-256\n\nüéØ Quality Score (Node #10):\n‚Ä¢ Criteria:\n  - overall_quality\n  - technical_quality\n  - artistic_quality\n‚Ä¢ Depth:\n  - quick (fast)\n  - standard (balanced)\n  - detailed (thorough)\n‚Ä¢ Model:\n  - balanced\n  - technical_focus\n  - artistic_focus\n\nüìö Learning (Node #14):\n‚Ä¢ style_category:\n  - photorealistic\n  - artistic\n  - cinematic\n  - abstract\n‚Ä¢ feature_emphasis:\n  - composition\n  - lighting\n  - color\n  - detail\n‚Ä¢ learning_rate: 1.0-2.0\n\nüí° Suggestion (Node #16):\n‚Ä¢ target_score: 0.7-0.9\n‚Ä¢ suggestion_mode:\n  - improve (enhance)\n  - explore (variety)\n  - refine (polish)\n‚Ä¢ max_suggestions: 3-10\n‚Ä¢ creativity: 0.8-1.5\n‚Ä¢ temperature: 0.5-1.0\n\nüîß Optimization:\n‚Ä¢ High scores ‚Üí lower learning_rate\n‚Ä¢ Low scores ‚Üí higher creativity\n‚Ä¢ Stuck ‚Üí change suggestion_mode\n‚Ä¢ Fast iteration ‚Üí quick depth\n‚Ä¢ Best quality ‚Üí detailed depth"
      ],
      "color": "#323",
      "bgcolor": "#535"
    }
  ],
  "links": [
    [1, 2, 0, 6, 0, "MODEL"],
    [2, 2, 1, 3, 0, "CLIP"],
    [3, 2, 1, 4, 0, "CLIP"],
    [4, 2, 2, 7, 1, "VAE"],
    [5, 3, 0, 6, 1, "CONDITIONING"],
    [6, 4, 0, 6, 2, "CONDITIONING"],
    [7, 5, 0, 6, 3, "LATENT"],
    [8, 6, 0, 7, 0, "LATENT"],
    [9, 7, 0, 8, 0, "IMAGE"],
    [10, 7, 0, 9, 0, "IMAGE"],
    [11, 7, 0, 10, 0, "IMAGE"],
    [12, 9, 0, 10, 1, "STRING"],
    [13, 9, 0, 14, 1, "STRING"],
    [14, 10, 0, 14, 2, "FLOAT"],
    [16, 10, 1, 11, 0, "STRING"],
    [17, 10, 2, 12, 0, "STRING"],
    [18, 13, 0, 14, 0, "BRAIN"],
    [19, 14, 0, 16, 0, "BRAIN"],
    [20, 14, 1, 15, 0, "STRING"],
    [21, 16, 1, 17, 0, "STRING"],
    [13, 9, 0, 16, 1, "STRING"]
  ],
  "groups": [
    {
      "title": "üé® 1. GENERATION",
      "bounding": [70, 370, 820, 720],
      "color": "#3f789e",
      "font_size": 24
    },
    {
      "title": "ü§ñ 2. ANALYSIS",
      "bounding": [920, 370, 910, 680],
      "color": "#a1309b",
      "font_size": 24
    },
    {
      "title": "üìö 3. LEARNING",
      "bounding": [70, 1120, 1210, 270],
      "color": "#8a8",
      "font_size": 24
    },
    {
      "title": "üí° 4. ADAPTATION",
      "bounding": [420, 1390, 1060, 560],
      "color": "#88a",
      "font_size": 24
    }
  ],
  "config": {},
  "extra": {
    "workspace_info": {
      "id": "iterative-learning-loop",
      "version": "1.0.0",
      "description": "Manual iterative loop: Generate ‚Üí Analyze ‚Üí Learn ‚Üí Improve ‚Üí Repeat"
    }
  },
  "version": 0.4
}
